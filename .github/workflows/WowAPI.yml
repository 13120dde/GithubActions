
name: WOW API TRAINING
on:  
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]
  workflow_dispatch:

jobs:
  authenticate-bnet:
    runs-on: windows-latest
    steps:
    
      - name: Check out repo
        uses: actions/checkout@v2

      - name: Authenticate with BNet
        id: bnet-auth
        run: |
          $Uri = "https://eu.battle.net/oauth/token"
          $RequestBody = @{
              client_id  = '${{secrets.WOW_CLIENT_ID}}'
              client_secret  = '${{secrets.WOW_CLIENT_SECRET}}'
              grant_type = 'client_credentials'
          }
          $Result = Invoke-WebRequest -Uri $Uri -Method Post -Body $RequestBody
          $token = ConvertFrom-Json $Result.Content
          Write-Host $token
       # run: |
        #  $access_token =  ./Scripts/GetBnetToken.ps1 ${{secrets.WOW_CLIENT_ID}} ${{secrets.WOW_CLIENT_SECRET}}
        # Write-Host "accToken $access_token"
          