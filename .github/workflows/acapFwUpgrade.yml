name: Firmware Upgrade
on: push
#  schedule:
#    - cron: '0 0 * * SAT'

jobs:

  testJob:
      name: Test
      runs-on: ubuntu-latest
      steps:
        - id: set_var
          run: |
            content=`cat ./ATConfigurations/Dc_PlaybackFlaui/default_site.json`
            # the following lines are only required for multi line json
            content="${content//'%'/'%25'}"
            content="${content//$'\n'/'%0A'}"
            content="${content//$'\r'/'%0D'}"
            # end of optional handling for multi line json
            echo "::set-output name=packageJson::$content"
        - run: |
            echo "${{fromJson(steps.set_var.outputs.packageJson).version}}"

  fw-upgrade:
    needs: testJob
    runs-on: windows-latest
    strategy:
      matrix:
        run: ['run1','run2']
    steps:
      - run: echo Run ${{matrix.run}}
      - run: date
      
  
